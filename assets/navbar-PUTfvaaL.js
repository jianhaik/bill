import"./modulepreload-polyfill-B5Qt9EMX.js";import{r as Q,j as r}from"./react-BdZFSBsr.js";import"./firebase-B0CX24e-.js";import{b,p as J,c as j,i as Re,g as Fe,a as je,s as He,o as k}from"./@firebase-CDL1tB0y.js";import{c as U}from"./react-dom-D4EJkNTg.js";import{X as Me}from"./react-data-table-component-CFZviFFd.js";import{D as Je}from"./rsuite-BaD6UYfK.js";import"./@babel-D5GiwVxl.js";import"./idb-BXWtuYvb.js";import"./tslib-Bl3NwWCd.js";import"./scheduler-BNqrtbQi.js";import"./styled-components-B6ns2VA2.js";import"./@emotion-sScrWPmR.js";import"./stylis-DinRj2j6.js";import"./lodash-CbiWtPZ3.js";import"./prop-types-CvXJVnZB.js";import"./classnames-Dq6UHPZf.js";import"./@juggle-C8OzoCMD.js";import"./@rsuite-CWz-jV_Y.js";import"./dom-lib-BkUHInzI.js";import"./date-fns-jpXNl_-y.js";import"./react-window-W2jQ0Fyy.js";import"./memoize-one-CcMeOnPo.js";let z="all drivers";const Ne=()=>{var e=new Array;e.push("all drivers");for(var n=0;n<H.length;n++)e.push(H[n]);console.log(H),console.log(e);const[o,t]=Q.useState("all drivers"),[l]=Q.useState(e),i=c=>{t(c),z=c,window.dispatchEvent(new Event("custom-storage"))};return r.jsx(r.Fragment,{children:r.jsx("ul",{style:{listStyle:"none",padding:0,margin:0,backgroundColor:"skyblue",width:"100%",height:"100%",overflowY:"scroll",position:"relative"},children:l.map(c=>r.jsx("li",{style:{backgroundColor:c===o?"yellow":"orange",fontSize:20,color:c===o?"blue":"green",borderRadius:20,borderWidth:2,borderColor:"Red",alignItems:"center",textAlign:"center",paddingLeft:15,paddingRight:15,margin:25},onClick:()=>i(c),children:c},c))})})},ke=[{name:"ID",selector:e=>e.id,sortable:!0,width:"60px"},{name:"Barcode",selector:e=>e.B2_Barcode,sortable:!0,width:"150px"},{name:"LastStep",selector:e=>e.L0_LastStep,sortable:!0},{name:"When",selector:e=>e.N6_When,sortable:!0},{name:"Deliver",selector:e=>e.N7_ByWho,sortable:!0},{name:"Picture",selector:e=>e.N8_Photo,sortable:!0},{name:"B5_BTACC",selector:e=>e.B5_BTACC,sortable:!0},{name:"Receiver",selector:e=>e.C0_Company,sortable:!0,width:"150px"},{name:"Address",selector:e=>e.C1_Address1,sortable:!0,width:"150px"}],Ge=[{A0_When:"A0_When",A1_ByWhoAdd:"A1_ByWhoAdd",B0_JobID:"B0_JobID",B1_ModeID:"B1_ModeID",B2_Barcode:"No data!",B3_CarrierRef:"B3_CarrierRef",B4_ScheduledDate:"B4_ScheduledDate",B5_BTACC:"B5_BTACC",B6_ServiceType:"B6_ServiceType",B7_Weight:"",B8_Unit:"B8_Unit",B9_Route:"B9_Route",C0_Company:"",C1_Address1:"",C2_Address2:"C2_Address2",C3_Address3:"C3_Address3",C4_Receiver:"C4_Receiver",C5_City:"C5_City",C6_ProvState:"C6_ProvState",C7_PostalCode:"C7_PostalCode",C8_Phone:"C8_Phone",C9_Email:"C9_Email",D0_When:"D0_When",D1_ByWhoPrice:"D1_ByWhoPrice",D2_WhatType:"D2_WhatType",D3_Size:"D3_Size",D4_HowMany:"D4_HowMany",D5_ExtraFee:"D5_ExtraFee",id:"",D7_What:"D7_What",D8_StartTime:"D8_StartTime",D9_EndTime:"D9_EndTime",E0_When:"E0_When",E1_ByWhoReceive:"E1_ByWhoReceive",F0_When:"F0_When",F1_ByWhoDispatch:"F1_ByWhoDispatch",F2_ToWho:"",G0_When:"G0_When",G1_ByWhoLoad:"G1_ByWhoLoad",H0_When:"H0_When",H1_ByWhoTrouble:"",H2_TroubleReason:"H2_TroubleReason",H3_Comment:"H3_Comment",H4_Photo:"H4_Photo",I0_When:"I0_When",I1_ByWhoFinish:"I1_ByWhoFinish",I2_Receiver:"I2_Receiver",I3_Comment:"I3_Comment",I4_Photo:"I4_Photo",J0_When:"J0_When",J1_ByWhoTerminate:"J1_ByWhoTerminate",J2_TerminateAction:"J2_TerminateAction",K0_When:"K0_When",K1_ByWhoGroup:"K1_ByWhoGroup",K2_GroupCode:"K2_GroupCode",L0_LastStep:"",M0_LoadedNumber:"M0_LoadedNumber",M1_GroupSize:"M1_GroupSize",M2_What:"M2_What",M3_What:"M3_What",N0_NormalPrice:"N0_NormalPrice",N1_ExtraFee:"N1_ExtraFee",N2_TimePrice:"N2_TimePrice",N3_LocationFee:"N3_LocationFee",N4_HighService:"N4_HighService",N5_ChargeType:"N5_ChargeType",N6_When:"N6_When",N7_ByWho:"N7_ByWho",N8_Photo:"N8_Photo",N9_PushKey:"N9_PushKey"}];var $=1,ee=0,L=[],S=[],O="",q=!1;const Ke=e=>{e.key==="Control"&&(q=!0)};document.addEventListener("keydown",Ke);const Ue=e=>{e.key==="Control"&&(q=!1)};document.addEventListener("keyup",Ue);function ze(){const n=Object.keys({A0_When:"A0_When",A1_ByWhoAdd:"A1_ByWhoAdd",B0_JobID:"B0_JobID",B1_ModeID:"B1_ModeID",B2_Barcode:"B2_Barcode",B3_CarrierRef:"B3_CarrierRef",B4_ScheduledDate:"B4_ScheduledDate",B5_BTACC:"B5_BTACC",B6_ServiceType:"B6_ServiceType",B7_Weight:"B7_Weight",B8_Unit:"B8_Unit",B9_Route:"B9_Route",C0_Company:"C0_Company",C1_Address1:"C1_Address1",C2_Address2:"C2_Address2",C3_Address3:"C3_Address3",C4_Receiver:"C4_Receiver",C5_City:"C5_City",C6_ProvState:"C6_ProvState",C7_PostalCode:"C7_PostalCode",C8_Phone:"C8_Phone",C9_Email:"C9_Email",D0_When:"D0_When",D1_ByWhoPrice:"D1_ByWhoPrice",D2_WhatType:"D2_WhatType",D3_Size:"D3_Size",D4_HowMany:"D4_HowMany",D5_ExtraFee:"D5_ExtraFee",id:"D6_What",D7_What:"D7_What",D8_StartTime:"D8_StartTime",D9_EndTime:"D9_EndTime",E0_When:"E0_When",E1_ByWhoReceive:"E1_ByWhoReceive",F0_When:"F0_When",F1_ByWhoDispatch:"F1_ByWhoDispatch",F2_ToWho:"F2_ToWho",G0_When:"G0_When",G1_ByWhoLoad:"G1_ByWhoLoad",H0_When:"H0_When",H1_ByWhoTrouble:"H1_ByWhoTrouble",H2_TroubleReason:"H2_TroubleReason",H3_Comment:"H3_Comment",H4_Photo:"H4_Photo",I0_When:"I0_When",I1_ByWhoFinish:"I1_ByWhoFinish",I2_Receiver:"I2_Receiver",I3_Comment:"I3_Comment",I4_Photo:"I4_Photo",J0_When:"J0_When",J1_ByWhoTerminate:"J1_ByWhoTerminate",J2_TerminateAction:"J2_TerminateAction",K0_When:"K0_When",K1_ByWhoGroup:"K1_ByWhoGroup",K2_GroupCode:"K2_GroupCode",L0_LastStep:"L0_LastStep",M0_LoadedNumber:"M0_LoadedNumber",M1_GroupSize:"M1_GroupSize",M2_What:"M2_What",M3_What:"M3_What",N0_NormalPrice:"N0_NormalPrice",N1_ExtraFee:"N1_ExtraFee",N2_TimePrice:"N2_TimePrice",N3_LocationFee:"N3_LocationFee",N4_HighService:"N4_HighService",N5_ChargeType:"N5_ChargeType",N6_When:"N6_When",N7_ByWho:"N7_ByWho",N8_Photo:"N8_Photo",N9_PushKey:"N9_PushKey"});for(var o=new Array,t=0;t<E.length;t++){for(var l={},i=0;i<n.length;i++){var c=n[i];l[c]=E[t][i]}var s=t+1;l.id=s.toString(),o.push(l)}const[d,h]=Q.useState(o),[m,u]=Q.useState([]),B=()=>{console.log(z),console.log(V),console.log(X);for(var a=new Array,_=0;_<o.length;_++){o[_],console.log(o[_]);var g=Object.values(o[_]);if(console.log(g[66]),console.log(g[67]),z=="all drivers"){const v=new Date(g[66]).getTime();v>V&&v<X&&a.push(o[_])}else{const v=new Date(g[66]).getTime();v>V&&v<X&&g[67]==z&&a.push(o[_])}}a.length>0?h(a):h(Ge)};window.addEventListener("custom-storage",B);const w=a=>m.includes(a.id),x=({selectedRows:a})=>{if($===1){if(console.log("Selected Rows: ",a),a.length===0?L.length===0?(S=[],O="noClick"):(S=L.filter(I=>!a.includes(I)),O="reduce"):a.length>L.length?(S=a.filter(I=>!L.includes(I)),O="add"):(S=L.filter(I=>!a.includes(I)),O="reduce"),console.log("diff= ",S),console.log("clickState: ",O),S.length>0&&console.log("diffId= ",Object.values(S[0])[28]),q&&ee>0){var _=ee,g=Number(Object.values(S[0])[28]);console.log("a:",_),console.log("b:",g);var v=[];if(_>g)for(let C=g;C<=_;C++)v.push(C);if(_<g)for(let C=_;C<=g;C++)v.push(C);_=g;let I=a.map(C=>Number(C.id));console.log("newArr:",I),console.log("selRows: ",v);let K=[];if(O==="add"&&v.length>0){let C=Array.from(new Set([...v,...I])),Oe=d.map(Z=>Number(Z.id));K=C.filter(Z=>Oe.includes(Z))}O==="reduce"&&(K=I.filter(C=>!v.includes(C))),v.length>0&&($=0,q=!1,u(K.map(String)),console.log("id: ",K))}S.length>0&&(ee=Number(Object.values(S[0])[28])),L=a}else L=a,$=1;let T=a.map(I=>I.id);var f=JSON.stringify(T);let F=a.map(I=>I.B2_Barcode);var A=JSON.stringify(F);console.log("id222: ",T),window.localStorage.setItem("selRowsId",f),window.localStorage.setItem("selRows",A)},N=({data:a})=>r.jsx("pre",{children:r.jsx("table",{style:{padding:0,marginLeft:30,backgroundColor:"pink",width:"100%",position:"relative"},children:r.jsxs("tbody",{children:[r.jsxs("tr",{children:[r.jsxs("td",{children:["id:",a.id]}),r.jsxs("td",{children:["JobID:",a.B0_JobID]}),r.jsxs("td",{children:["Company:",a.C0_Company]}),r.jsxs("td",{children:["WhenTrouble:",a.H0_When]})]}),r.jsxs("tr",{children:[r.jsxs("td",{children:["ByWhoAdd:",a.A1_ByWhoAdd]}),r.jsxs("td",{children:["ModeID:",a.B1_ModeID]}),r.jsxs("td",{children:["Address1:",a.C1_Address1]}),r.jsxs("td",{children:["WhoHasTrouble:",a.H1_ByWhoTrouble]})]}),r.jsxs("tr",{children:[r.jsxs("td",{children:["ByWhoReceive:",a.E1_ByWhoReceive]}),r.jsxs("td",{children:["Barcode:",a.B2_Barcode]}),r.jsxs("td",{children:["Address2:",a.C2_Address2]}),r.jsxs("td",{children:["TroubleReason:",a.H2_TroubleReason]})]}),r.jsxs("tr",{children:[r.jsxs("td",{children:["DispatchTo:",a.F2_ToWho]}),r.jsxs("td",{children:["CarrierRef:",a.B3_CarrierRef]}),r.jsxs("td",{children:["Address3:",a.C3_Address3]}),r.jsxs("td",{children:["TroubleComment:",a.H3_Comment]})]}),r.jsxs("tr",{children:[r.jsxs("td",{children:["ByWhoLoad:",a.G1_ByWhoLoad]}),r.jsxs("td",{children:["ScheduledDate:",a.B4_ScheduledDate]}),r.jsxs("td",{children:["Receiver:",a.C4_Receiver]}),r.jsx("td",{children:"TroublePhoto:...."})]}),r.jsxs("tr",{children:[r.jsxs("td",{children:["GroupCode:",a.K2_GroupCode]}),r.jsxs("td",{children:["BTACC:",a.B5_BTACC]}),r.jsxs("td",{children:["City:",a.C5_City]}),r.jsxs("td",{children:["WhenFinish:",a.I0_When]})]}),r.jsxs("tr",{children:[r.jsxs("td",{children:["ByWhoTrouble:",a.H1_ByWhoTrouble]}),r.jsxs("td",{children:["ServiceType:",a.B6_ServiceType]}),r.jsxs("td",{children:["ProvState:",a.C6_ProvState]}),r.jsxs("td",{children:["WhoDidFinish:",a.I1_ByWhoFinish]})]}),r.jsxs("tr",{children:[r.jsxs("td",{children:["ByWhoFinish:",a.I1_ByWhoFinish]}),r.jsxs("td",{children:["Weight:",a.B7_Weight]}),r.jsxs("td",{children:["PostalCode:",a.C7_PostalCode]}),r.jsxs("td",{children:["Receiver:",a.I2_Receiver]})]}),r.jsxs("tr",{children:[r.jsxs("td",{children:["WhoTerminate:",a.J1_ByWhoTerminate]}),r.jsxs("td",{children:["Unit:",a.B8_Unit]}),r.jsxs("td",{children:["Phone#:",a.C8_Phone]}),r.jsxs("td",{children:["FinishComment:",a.I3_Comment]})]}),r.jsxs("tr",{children:[r.jsxs("td",{children:["LastStep:",a.L0_LastStep]}),r.jsxs("td",{children:["Route:",a.B9_Route]}),r.jsxs("td",{children:["Email:",a.C9_Email]}),r.jsx("td",{children:"FinishPhoto:...."})]})]})})});return r.jsx(r.Fragment,{children:r.jsx("div",{className:"container",style:{padding:0,margin:0,backgroundColor:"white",height:"100%",overflowY:"scroll",position:"relative"},children:r.jsx(Me,{style:{backgroundColor:"yellowgreen"},columns:ke,data:d,fixedHeader:!0,pagination:!0,paginationPerPage:15,paginationRowsPerPageOptions:[14,15,16,17,18],selectableRows:!0,dense:!0,highlightOnHover:!0,selectableRowsHighlight:!0,selectableRowsSingle:!1,onSelectedRowsChange:x,selectableRowSelected:w,expandableRows:!0,expandOnRowDoubleClicked:!0,expandableRowsComponent:N})})})}const G=()=>{var e=localStorage.getItem("action"),n=localStorage.getItem("toWho"),o=localStorage.getItem("selRows"),t=JSON.parse(o);let l=new Date().valueOf();for(var i=new Date().getTimezoneOffset()*-60*1e3,c=0;c<t.length;c++){const s=y[1]+"/OriginalData/"+t[c],d=b(D,s),h=J(d);switch(e){case"dispatchTo":break;case"undispatch":break;case"deleteItems":j(d,null).then(()=>{}).catch(m=>{console.log(m)});break;case"terminateItems":j(h,{J0_When:new Date(l+i).toISOString(),J1_ByWhoTerminate:y[5],J2_TerminateAction:n,L0_LastStep:"Terminated"}).then(()=>{}).catch(m=>{console.log(m)});break}}P()},Ye=()=>{for(var e=localStorage.getItem("newDate"),n=new Array,o=0;o<E.length;o++)E[o][6]==e&&E[o][55]=="UnDispatch"&&n.push(E[o][4]);if(n.length>0){for(var t=0;t<n.length;t++){var l=W.get(n[t]),i=l[19].slice(0,3),c=Y.get(i);let d=new Date().valueOf();var s=new Date().getTimezoneOffset()*-60*1e3;const h=y[1]+"/OriginalData/"+n[t],m=b(D,h),u=J(m);j(u,{F0_When:new Date(d+s).toISOString(),F1_ByWhoDispatch:y[5],F2_ToWho:c,L0_LastStep:"Dispatched"}).then(()=>{}).catch(B=>{console.log(B)})}P()}},Ve=e=>{let n=new Date().valueOf();for(var o=new Date().getTimezoneOffset()*-60*1e3,t={},l=0,i=0,c=0,s=1;s<e.length;s++){const d=y[1]+"/OriginalData/"+e[s][2],h=b(D,d),m=J(h);t.clear,t.A0_When=new Date(n+o).toISOString(),t.A1_ByWhoAdd=y[5],t.B0_JobID=e[s][0],t.B1_ModeID=e[s][1],t.B2_Barcode=e[s][2],t.B3_CarrierRef=e[s][3],t.B4_ScheduledDate=e[s][4],t.B5_BTACC=e[s][5],t.B6_ServiceType=e[s][6],t.B7_Weight=e[s][7],t.B8_Unit=e[s][8],t.B9_Route=e[s][9],t.C0_Company=e[s][10],t.C1_Address1=e[s][11],t.C2_Address2=e[s][12],t.C3_Address3=e[s][13],t.C4_Receiver=e[s][14],t.C5_City=e[s][15],t.C6_ProvState=e[s][16],t.C7_PostalCode=e[s][17],t.C8_Phone=e[s][18],t.C9_Email=e[s][19],t.L0_LastStep="UnDispatch",j(m,t).then(()=>{l=l+1,c=l+i,c==e.length-1&&(window.alert("data handle finished,good="+l+",bad="+i),P())}).catch(u=>{console.log(u),i=i+1,c=l+i,c==e.length-1&&(window.alert("data handle finished,good="+l+",bad="+i),P())})}},Xe=(e,n,o)=>{let t=new Date().valueOf();var l=new Date().getTimezoneOffset()*-60*1e3,i={};i.clear,i.A0_When=new Date(t+l).toISOString(),i.A1_ByWhoAdd=y[5];for(var c=0;c<n.length;c++)i[n[c]]=o[c];const s=y[1]+"/OriginalData/"+e,d=b(D,s),h=J(d);j(h,i).then(()=>{window.alert("data change finished,good!"),P()}).catch(m=>{console.log(m),window.alert("data handle error"),P()})},Qe=(e,n,o)=>{let t=new Date().valueOf();var l=new Date().getTimezoneOffset()*-60*1e3,i={};i.clear,i.D0_When=new Date(t+l).toISOString(),i.D1_ByWhoPrice=y[5];for(var c=0;c<n.length;c++)i[n[c]]=o[c];const s=y[1]+"/OriginalData/"+e,d=b(D,s),h=J(d);j(h,i).then(()=>{window.alert("Price handle finished,good!"),P()}).catch(m=>{console.log(m),window.alert("data handle error"),P()})};var E=[],W=new Map,Y=new Map,R=[],te=[],y=[],H=[],p=new Array,D;let V=new Date().getTime(),X=new Date().getTime();const qe=()=>{var e=window.localStorage.getItem("userInfo")??"[]";window.sessionStorage.setItem("userInfo",e);var n=window.localStorage.getItem("driverArr")??"[]";window.sessionStorage.setItem("driverArr",n),y=JSON.parse(e),H=JSON.parse(n),console.log(y),console.log(H),Ze()},Ze=()=>{const n=Re({apiKey:"AIzaSyDYSjXVHK9N9H_sQYF9jEb1k4Nhtl-V-us",authDomain:"joblist-kang.firebaseapp.com",databaseURL:"https://joblist-kang.firebaseio.com",projectId:"joblist-kang",storageBucket:"joblist-kang.firebasestorage.app",messagingSenderId:"704002182844",appId:"1:704002182844:web:636b84021295c9c629cab9",measurementId:"G-W779X1QZW2"});D=Fe(n),console.log(D);const o=je();He(o,"kjhlr@hotmail.com","671691").then(t=>{$e(D);const l=t.user;return console.log(l.uid),l.uid}).catch(t=>{const l=t.code,i=t.message;return console.log(i+"="+l),i+"="+l})},$e=e=>{var n=y[1]+"/OriginalData";console.log(n),k(b(e,"/"+n),o=>{const t=o.val();console.log(t),Pe(t)},{onlyOnce:!0})},Ae=()=>{var e=y[1]+"/OriginalData";console.log(e),k(b(D,"/"+e),n=>{const o=n.val();console.log(o),Pe(o)},{onlyOnce:!0})};function Pe(e){const n={A0_When:"A0_When",A1_ByWhoAdd:"A1_ByWhoAdd",B0_JobID:"B0_JobID",B1_ModeID:"B1_ModeID",B2_Barcode:"B2_Barcode",B3_CarrierRef:"B3_CarrierRef",B4_ScheduledDate:"B4_ScheduledDate",B5_BTACC:"B5_BTACC",B6_ServiceType:"B6_ServiceType",B7_Weight:"B7_Weight",B8_Unit:"B8_Unit",B9_Route:"B9_Route",C0_Company:"C0_Company",C1_Address1:"C1_Address1",C2_Address2:"C2_Address2",C3_Address3:"C3_Address3",C4_Receiver:"C4_Receiver",C5_City:"C5_City",C6_ProvState:"C6_ProvState",C7_PostalCode:"C7_PostalCode",C8_Phone:"C8_Phone",C9_Email:"C9_Email",D0_When:"D0_When",D1_ByWhoPrice:"D1_ByWhoPrice",D2_WhatType:"D2_WhatType",D3_Size:"D3_Size",D4_HowMany:"D4_HowMany",D5_ExtraFee:"D5_ExtraFee",id:"D6_What",D7_What:"D7_What",D8_StartTime:"D8_StartTime",D9_EndTime:"D9_EndTime",E0_When:"E0_When",E1_ByWhoReceive:"E1_ByWhoReceive",F0_When:"F0_When",F1_ByWhoDispatch:"F1_ByWhoDispatch",F2_ToWho:"F2_ToWho",G0_When:"G0_When",G1_ByWhoLoad:"G1_ByWhoLoad",H0_When:"H0_When",H1_ByWhoTrouble:"H1_ByWhoTrouble",H2_TroubleReason:"H2_TroubleReason",H3_Comment:"H3_Comment",H4_Photo:"H4_Photo",I0_When:"I0_When",I1_ByWhoFinish:"I1_ByWhoFinish",I2_Receiver:"I2_Receiver",I3_Comment:"I3_Comment",I4_Photo:"I4_Photo",J0_When:"J0_When",J1_ByWhoTerminate:"J1_ByWhoTerminate",J2_TerminateAction:"J2_TerminateAction",K0_When:"K0_When",K1_ByWhoGroup:"K1_ByWhoGroup",K2_GroupCode:"K2_GroupCode",L0_LastStep:"L0_LastStep",M0_LoadedNumber:"M0_LoadedNumber",M1_GroupSize:"M1_GroupSize",M2_What:"M2_What",M3_What:"M3_What",N0_NormalPrice:"N0_NormalPrice",N1_ExtraFee:"N1_ExtraFee",N2_TimePrice:"N2_TimePrice",N3_LocationFee:"N3_LocationFee",N4_HighService:"N4_HighService",N5_ChargeType:"N5_ChargeType",N6_When:"N6_When",N7_ByWho:"N7_ByWho",N8_Photo:"N8_Photo",N9_PushKey:"N9_PushKey"};E=[],W.clear,R=[];var o=[],t=[];o=Object.keys(n),t=Object.values(n),console.log(o),console.log(t);var l=[],i=[],c=[];l=Object.values(e);for(var s=[],d=0;d<l.length;d++){i=Object.keys(l[d]),c=Object.values(l[d]),console.log("keyArr="+i),console.log("valueArr="+c),s.length=0;for(var h=0;h<o.length;h++)s.push("nil");for(var m=0;m<c.length;m++){for(var u=Object.keys(c[m]),B=Object.values(c[m]),w=0;w<u.length;w++)if(t.includes(u[w])){var x=t.indexOf(u[w]),N=u.indexOf(u[w]);s[x]=B[N]}if(u[1]!=="D1_ByWhoPrice"&&u[1]!=="A1_ByWhoAdd"){if(s[55]==="MeetTrouble"&&s[41]!=="short"){for(var a=[],_=0;_<70;_++)a.push(s[_]);a[66]=s[39],a[67]=s[40],a[68]="photo",console.log("tempArr=",a),E.push(a),W.set(a[39]+a[40],a)}else if(s[55]==="Finished"){for(var a=[],_=0;_<70;_++)a.push(s[_]);a[66]=s[44],a[67]=s[45],a[68]="photo",console.log("tempArr=",a),E.push(a),W.set(a[44]+a[45],a)}}}}console.log(W),console.log(E);for(var g=0;g<E.length;g++){var v=E[g][6];R.includes(v)||R.push(v)}R.sort(),R.push("all days"),R.reverse();var T=JSON.stringify(E);window.sessionStorage.setItem("dataArr",T);var f=JSON.stringify(R);window.sessionStorage.setItem("allDate",f),window.dispatchEvent(new Event("3dataReady"))}const et=e=>{var n=e;const o=n[0].getTime(),t=n[1].getTime();var l=new Date().getTimezoneOffset()*-60*1e3;const i=new Date(o+l),c=new Date(t+l+24*60*60*1e3);n[0].toISOString(),n[1].toISOString(),console.log("rootValue-0=",i.toISOString()),console.log("rootValue-1=",c.toISOString()),V=o+l,X=t+l+24*60*60*1e3,window.dispatchEvent(new Event("custom-storage"))},tt=()=>r.jsx(r.Fragment,{children:r.jsx(Je,{format:"MMMM dd, yyyy",defaultValue:[new Date,new Date],onChange:et})}),ot=()=>{const e=document.getElementById("mySidenav");if(e==null)console.log("navDomNode==null");else{const t=U.createRoot(e);console.log("navDomNode==ok"),t.render(r.jsx(Ne,{}))}const n=document.getElementById("example");if(n==null)console.log("commentDomNode==null");else{const t=U.createRoot(n);console.log("commentDomNode==ok"),t.render(r.jsx(ze,{}))}const o=document.getElementById("root");if(o==null)console.log("commentDomNode==null");else{const t=U.createRoot(o);console.log("commentDomNode==ok"),t.render(r.jsx(tt,{}))}},nt=()=>{var e=y[1]+"/DispatchRule/Dispatch/DispatchAll";console.log(e),k(b(D,"/"+e),n=>{const o=n.val();console.log(o);var t=Object.values(o);Y.clear;for(var l=0;l<t.length;l++){var i=Object.values(t[l]);Y.set(i[2],i[1])}console.log(Y),Ye()},{onlyOnce:!0})},at=()=>{var e=y[1]+"/DispatchRule/UnDispatch/UnDispatchSpecial";console.log(e),k(b(D,"/"+e),n=>{const o=n.val();console.log(o),te=[],te=Object.keys(o),console.log(te)},{onlyOnce:!0})},Le=()=>{var e="sqlite";console.log(e),k(b(D,"/"+e),n=>{const o=n.val();console.log(o);var t=[];t=[],t=Object.values(o),p=[];for(var l=0;l<t.length;l++)p.push(Object.values(t[l]));console.log(p)},{onlyOnce:!0})};var oe="initial",M="initial";qe();const lt=()=>{if(oe=="initial"){var e=document.getElementById("companyName");console.log(y),console.log(e),e.textContent=y[1],oe="alreadyRead"}M=="refreshAll"&&(document.getElementById("searchID").value="",document.getElementById("downBut").textContent="all data"),window.dispatchEvent(new Event("sideDate-refresh"))},st=()=>{oe=="initial"&&ot(),M=="initial"||M=="refreshAll"?(window.localStorage.setItem("afterChoose","refreshAll"),window.localStorage.setItem("newDate","all days"),window.localStorage.setItem("newLast","all data"),window.localStorage.setItem("newSearch","nothing")):window.localStorage.setItem("afterChoose","refreshHalf"),setTimeout(lt,10)};window.addEventListener("3dataReady",st);const rt=()=>{var e=document.getElementById("downCon");e.style.display="block"},it=()=>{var e=document.getElementById("downCon");e.style.display="none",document.getElementById("downBut").textContent="all data",window.localStorage.setItem("afterChoose","newLast"),window.localStorage.setItem("newLast","all data"),window.dispatchEvent(new Event("custom-storage"))},dt=()=>{var e=document.getElementById("downCon");e.style.display="none",document.getElementById("downBut").textContent="undispatch",window.localStorage.setItem("afterChoose","newLast"),window.localStorage.setItem("newLast","UnDispatch"),window.dispatchEvent(new Event("custom-storage"))},ct=()=>{var e=document.getElementById("downCon");e.style.display="none",document.getElementById("downBut").textContent="dispatched",window.localStorage.setItem("afterChoose","newLast"),window.localStorage.setItem("newLast","Dispatched"),window.dispatchEvent(new Event("custom-storage"))},ht=()=>{var e=document.getElementById("downCon");e.style.display="none",document.getElementById("downBut").textContent="trouble",window.localStorage.setItem("afterChoose","newLast"),window.localStorage.setItem("newLast","MeetTrouble"),window.dispatchEvent(new Event("custom-storage"))},mt=()=>{var e=document.getElementById("downCon");e.style.display="none",document.getElementById("downBut").textContent="finished",window.localStorage.setItem("afterChoose","newLast"),window.localStorage.setItem("newLast","Finished"),window.dispatchEvent(new Event("custom-storage"))},ut=()=>{var e=document.getElementById("downCon");e.style.display="none",document.getElementById("downBut").textContent="terminated",window.localStorage.setItem("afterChoose","newLast"),window.localStorage.setItem("newLast","terminated"),window.dispatchEvent(new Event("custom-storage"))};var re;(re=document.getElementById("downBut"))==null||re.addEventListener("click",rt);var ie;(ie=document.getElementById("alldata"))==null||ie.addEventListener("click",it);var de;(de=document.getElementById("undispatch"))==null||de.addEventListener("click",dt);var ce;(ce=document.getElementById("dispatched"))==null||ce.addEventListener("click",ct);var he;(he=document.getElementById("trouble"))==null||he.addEventListener("click",ht);var me;(me=document.getElementById("finished"))==null||me.addEventListener("click",mt);var ue;(ue=document.getElementById("terminated"))==null||ue.addEventListener("click",ut);const _t=()=>{var e=document.getElementById("downContent");e.style.display="block"},P=()=>{M="refreshHalf",Ae()},gt=()=>{var e=document.getElementById("downContent");e.style.display="none",M="refreshAll",Ae()};var ne=0;const vt=()=>{var e=document.getElementById("downContent");e.style.display="none",setTimeout(yt,10)},yt=()=>{var e=localStorage.getItem("selRows"),n=JSON.parse(e);if(n.length>0)if(ne==0){const o=document.getElementById("win");U.createRoot(o).render(r.jsx(Ne,{})),ne=1,setTimeout(ae,300)}else setTimeout(ae,100);else window.alert("Please choose items first!")},ae=()=>{window.dispatchEvent(new Event("showWin"))};function pt(e){confirm(e)==!0?(console.log("alert: ","You pressed OK!"),window.localStorage.setItem("action","undispatch"),window.localStorage.setItem("toWho","nobody"),G()):console.log("alert: ","You canceled!")}const Bt=()=>{var e=document.getElementById("downContent");e.style.display="none",setTimeout(wt,10)},wt=()=>{var e=localStorage.getItem("selRows"),n=JSON.parse(e);n.length>0?pt("Do you want to undispatch these items? "):window.alert("Please choose items first!")};function ft(e){confirm(e)==!0?(console.log("alert: ","You pressed OK!"),window.localStorage.setItem("action","dispatchAll"),window.localStorage.setItem("toWho","byRule"),nt()):console.log("alert: ","You canceled!")}const It=()=>{var e=document.getElementById("downContent");e.style.display="none",setTimeout(Ct,10)},Ct=()=>{var e=window.localStorage.getItem("newDate")??"";e=="all days"?window.alert("Please choose one date, then continue!"):ft("Do you want to dispatch all undispatched items by pre-set rule? ")};function Et(e){confirm(e)==!0?(console.log("alert: ","You pressed OK!"),window.localStorage.setItem("action","unDispatchSp"),window.localStorage.setItem("toWho","unDisSpRule"),at()):console.log("alert: ","You canceled!")}const Dt=()=>{var e=document.getElementById("downContent");e.style.display="none",setTimeout(St,10)},St=()=>{var e=window.localStorage.getItem("newDate")??"";e=="all days"?window.alert("Please choose one date, then continue!"):Et("Do you want to undispatch special items by pre-set rule? ")},Wt=()=>{var e=localStorage.getItem("selRows"),n=JSON.parse(e);if(n.length==1){var o=W.get(n[0]);if(o[55]=="Finished")window.alert("Finished item can not be edited!");else{var t=document.getElementById("itemEdit");t.style.display="block",setTimeout(qt,10)}}else window.alert("Please choose only one item first!")},bt=()=>{var e=document.getElementById("downContent");e.style.display="none",setTimeout(Wt,10)};function xt(e){confirm(e)==!0?(console.log("alert: ","You pressed OK!"),window.localStorage.setItem("action","deleteItems"),window.localStorage.setItem("toWho","deleteRows"),G()):console.log("alert: ","You canceled!")}const Tt=()=>{var e=document.getElementById("downContent");e.style.display="none",setTimeout(Nt,10)},Nt=()=>{var e=localStorage.getItem("selRows"),n=JSON.parse(e);n.length>0?xt("Do you want to delete these items? "):window.alert("Please choose items first!")};function At(e){if(confirm(e)==!0){console.log("alert: ","You pressed OK!"),window.localStorage.setItem("action","terminateItems");var n=document.getElementById("actionItems");n.style.display="block"}else console.log("alert: ","You canceled!")}const Pt=()=>{var e=document.getElementById("downContent");e.style.display="none",setTimeout(Lt,10)},Lt=()=>{var e=localStorage.getItem("selRows"),n=JSON.parse(e);n.length>0?At("Do you want to terminate these items? "):window.alert("Please choose items first!")},Ot=()=>{var e=document.getElementById("downContent");e.style.display="none",setTimeout(Rt,10)},Rt=()=>{var e=localStorage.getItem("selRows"),n=JSON.parse(e);if(n.length==1){console.log(n),console.log(W);var o=new Array;o=W.get(n[0]),console.log(o),o[55]=="Finished"||o[55]=="MeetTrouble"?Ft(o):window.alert("Only finished/trouble item have photo!")}else window.alert("Please choose one item only!")},Ft=e=>{var n,o,t;e[55]=="Finished"?(n=e[44],o=e[45],t=e[48]):e[55]=="MeetTrouble"?(n=e[39],o=e[40],t=e[43]):console.log("no photo");var l=JSON.stringify(t.split("&"));window.sessionStorage.setItem("myDate",n.substring(0,10)),window.sessionStorage.setItem("deliver",o),window.sessionStorage.setItem("photoArr",l),window.open("showPhoto.html","location=0,menubar=0,status=0,scrollbars=0")},jt=()=>{var e=document.getElementById("downContent");e.style.display="none",Le(),setTimeout(Ht,10)};async function Ht(){let e;[e]=await window.showOpenFilePicker();const o=await(await e.getFile()).text();console.log("contents: ",o);let t=o.split(`\r
`);console.log(t.length),console.log(t[0]),console.log(t[1]),console.log(p);for(var l=t[1].trim(),i=0,c=0,s=0;s<l.length;s++){let f=l[s];f==","&&i++,f=="|"&&c++}if(i<20&&c<20){window.alert("new data,no such a data structure!");return}for(var d=new Array,h=0;h<t.length;h++){var m=t[h].trim();let f;if(i>20){for(var u=!1,B="",s=0;s<m.length;s++){let A=m[s];A=='"'?u?u=!1:u=!0:u&&A==","?B+=";":B+=A}f=B.split(","),d.push(f)}if(c>20){for(var w="",x=0;x<m.length;x++){let F=m[x];F==","?w+=";":w+=F}f=w.split("|"),d.push(f)}}console.log(d);for(var N="N",a=new Array,h=0;h<p.length;h++){console.log(p[h]);var _=parseInt(p[h][2]),g=parseInt(p[h][3]),v=parseInt(p[h][4]),T=d[1][_]+d[1][g]+d[1][v];if(console.log(T),console.log(p[h][5]),a=[],T==p[h][5]){console.log(p[h]),N="Y",a=p[h];break}}N=="Y"?(console.log(a),console.log(d),Mt(d,a)):window.alert("new data,no such a data structure!")}function Mt(e,n){var o=new Array,t=n[9].split(","),l=n[10].split(",");if(n[6]=="N")var i=0;else var i=1;if(n[8]=="Y")var c=e.length-1;else var c=e.length;for(var s=i;s<c;s++){for(var d=new Array,h=0;h<20;h++)d.push("nil");d[5]=n[1];for(var m=0;m<e[s].length;m++)if(t.includes(m.toString())){var u=e[s][m].trim(),B=t.indexOf(m.toString()),w=l[B];d[parseInt(w)]=u}var x=["PK","Pick Up"],N=["DL","Delivery"],a=["high","Delive","#0003D1"],_=["normal","nil","0"];x.includes(d[1])?d[1]="PickUp":N.includes(d[1])?d[1]="DropOff":d[1]=="Desktop"?d[1]="DeskTop":(console.log(d[1]),window.alert("new data,oneRowArr[1]!")),_.includes(d[6])?d[6]="normal":a.includes(d[6])?d[1]="high":window.alert("new data,oneRowArr[6]!"),d[17]=d[17].replace(/\s*/g,"");var g=d[4];if(g.length==8)var v=g.substring(0,4)+"/"+g.substring(4,6)+"/"+g.substring(6);else var v=Jt(g);console.log(v),d[4]=v,console.log(d[4]),o.push(d)}console.log(t),console.log(l),console.log(i),console.log(c),console.log(o);let T=new Date().valueOf();var f=new Date().getTimezoneOffset()*-60*1e3;const F=new Date(T+f).toISOString().slice(0,19).replace(/-/g,"/").replace("T"," ");var A=n[0]+"-"+n[1]+"-"+F+".csv";console.log(A),kt(o,A,"text/csv;charset=utf-8")}function Jt(e){var n=new Date(e);console.log(n),console.log(n.getMonth()),console.log(n.getDate());var o=n.getFullYear(),t=le(Number(n.getMonth()+1)),l=le(Number(n.getDate()));console.log(t),console.log(l);var i=o+"/"+t+"/"+l;return console.log(i),i}function le(e){return e<10?"0"+e:e}function kt(e,n,o){for(var t=["B0_JobID","B1_ModeID","B2_Barcode","B3_CarrierRef","B4_ScheduledDate","B5_BTACC","B6_ServiceType","B7_Weight","B8_Unit","B9_Route","C0_Compay","C1_Address1","C2_Address2","C3_Address3","C4_Receiver","C5_City","C6_ProvState","C7_PostalCode","C8_Phone","C9_Email"],l="",i=0;i<t.length;i++)l+=t[i]+",";l=l.slice(0,-1)+`\r
`;for(var c=0;c<e.length;c++){for(var s=0;s<e[c].length;s++)l+=e[c][s]+",";l=l.slice(0,-1)+`\r
`}l=l.slice(0,-2),console.log(l);var d=new Blob([l],{type:o});if(window.navigator.msSaveOrOpenBlob)window.navigator.msSaveOrOpenBlob(d,n);else{var h=document.createElement("a"),m=URL.createObjectURL(d);h.href=m,h.download=n,document.body.appendChild(h),h.click(),setTimeout(function(){document.body.removeChild(h),window.URL.revokeObjectURL(m)},0)}}const Gt=()=>{var e=document.getElementById("downContent");e.style.display="none",Le(),setTimeout(Kt,10)};async function Kt(){let e;[e]=await window.showOpenFilePicker();const o=await(await e.getFile()).text();console.log("contents: ",o);let t=o.split(`\r
`);console.log(t.length),console.log(t[0]),console.log(t[1]),console.log(p);var l=t[1].trim(),i=0;console.log(l);for(var c=0;c<l.length;c++)l[c]==","&&i++;if(i<15){window.alert("new data,no such a data structure!");return}var s=new Array;s=[];for(var d=0;d<t.length;d++){var h=t[d].trim();let m;m=h.split(","),s.push(m)}console.log(s),Ve(s)}var _e;(_e=document.getElementById("downButton"))==null||_e.addEventListener("click",_t);var ge;(ge=document.getElementById("refresh"))==null||ge.addEventListener("click",gt);var ve;(ve=document.getElementById("dispatchTo"))==null||ve.addEventListener("click",vt);var ye;(ye=document.getElementById("unDispatch"))==null||ye.addEventListener("click",Bt);var pe;(pe=document.getElementById("dispatchAll"))==null||pe.addEventListener("click",It);var Be;(Be=document.getElementById("unDispatchSpecial"))==null||Be.addEventListener("click",Dt);var we;(we=document.getElementById("oneRowEdit"))==null||we.addEventListener("click",bt);var fe;(fe=document.getElementById("deleteItems"))==null||fe.addEventListener("click",Tt);var Ie;(Ie=document.getElementById("terminate"))==null||Ie.addEventListener("click",Pt);var Ce;(Ce=document.getElementById("showPhoto"))==null||Ce.addEventListener("click",Ot);var Ee;(Ee=document.getElementById("createData"))==null||Ee.addEventListener("click",jt);var De;(De=document.getElementById("dataToFB"))==null||De.addEventListener("click",Gt);const Ut=()=>{let e=document.getElementById("searchID").value;window.localStorage.setItem("afterChoose","newSearch"),window.localStorage.setItem("newSearch",e),window.dispatchEvent(new Event("custom-storage"))};var Se;(Se=document.getElementById("searchID"))==null||Se.addEventListener("keyup",Ut);const zt=()=>{var e=document.getElementById("actionItems");e.style.display="none",window.localStorage.setItem("toWho","terminateCancel")},Yt=()=>{var e=document.getElementById("actionItems");e.style.display="none",window.localStorage.setItem("toWho","return"),G()},Vt=()=>{var e=document.getElementById("actionItems");e.style.display="none",window.localStorage.setItem("toWho","destroy"),G()},Xt=()=>{var e=document.getElementById("actionItems");e.style.display="none",window.localStorage.setItem("toWho","sell"),G()};var We;(We=document.getElementById("close-button"))==null||We.addEventListener("click",zt);var be;(be=document.getElementById("return"))==null||be.addEventListener("click",Yt);var xe;(xe=document.getElementById("destroyItem"))==null||xe.addEventListener("click",Vt);var Te;(Te=document.getElementById("sell"))==null||Te.addEventListener("click",Xt);const Qt=()=>{var e=new Array(25);e[0]=document.getElementById("jobID").value,e[1]=document.getElementById("modeID").value,e[2]=document.getElementById("barcode").value,e[3]=document.getElementById("carrierRef").value,e[4]=document.getElementById("scheduledDate").value,e[5]=document.getElementById("btacc").value,e[6]=document.getElementById("serviceType").value,e[7]=document.getElementById("weight").value,e[8]=document.getElementById("unit").value,e[9]=document.getElementById("route").value,e[10]=document.getElementById("company").value,e[11]=document.getElementById("address1").value,e[12]=document.getElementById("address2").value,e[13]=document.getElementById("address3").value,e[14]=document.getElementById("receiver").value,e[15]=document.getElementById("city").value,e[16]=document.getElementById("provState").value,e[17]=document.getElementById("postalCode").value,e[18]=document.getElementById("phone").value,e[19]=document.getElementById("email").value,e[20]=document.getElementById("size").value,e[21]=document.getElementById("howmany").value,e[22]=document.getElementById("starttime").value,e[23]=document.getElementById("endtime").value,e[24]=document.getElementById("extrafee").value;for(var n=localStorage.getItem("selRows"),o=JSON.parse(n),t=W.get(o[0]),l=["B0_JobID","B1_ModeID","B2_Barcode","B3_CarrierRef","B4_ScheduledDate","B5_BTACC","B6_ServiceType","B7_Weight","B8_Unit","B9_Route","C0_Compay","C1_Address1","C2_Address2","C3_Address3","C4_Receiver","C5_City","C6_ProvState","C7_PostalCode","C8_Phone","C9_Email","D3_Size","D4_HowMany","D8_StartTime","D9_EndTime","D5_ExtraFee"],i=["2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","25","26","30","31","27"],c=[],s=[],d=0;d<20;d++)e[d]!=t[d+2]&&(c.push(l[d]),s.push(e[d]));for(var h=[],m=[],u=20;u<25;u++)e[u]!=t[Number(i[u])]&&(h.push(l[u]),m.push(e[u]));s.length>0&&(Xe(t[4],c,s),console.log("titleArr1=",c),console.log("positionArr1=",s)),m.length>0&&(Qe(t[4],h,m),console.log("titleArr2=",h),console.log("positionArr2=",m));var B=document.getElementById("itemEdit");B.style.display="none"},se=()=>{document.getElementById("itemEdit").style.display="none"},qt=()=>{var t,l,i;var e=localStorage.getItem("selRows"),n=JSON.parse(e),o=W.get(n[0]);console.log("valueArr: ",o),document.getElementById("barcode").value=o[4],document.getElementById("barcode").readOnly=!0,document.getElementById("jobID").value=o[2],document.getElementById("modeID").value=o[3],document.getElementById("carrierRef").value=o[5],document.getElementById("scheduledDate").value=o[6],document.getElementById("btacc").value=o[7],document.getElementById("serviceType").value=o[8],document.getElementById("weight").value=o[9],document.getElementById("unit").value=o[10],document.getElementById("route").value=o[11],document.getElementById("company").value=o[12],document.getElementById("address1").value=o[13],document.getElementById("address2").value=o[14],document.getElementById("address3").value=o[15],document.getElementById("receiver").value=o[16],document.getElementById("city").value=o[17],document.getElementById("provState").value=o[18],document.getElementById("postalCode").value=o[19],document.getElementById("phone").value=o[20],document.getElementById("email").value=o[21],(t=document.getElementById("x-button"))==null||t.addEventListener("click",se),(l=document.getElementById("save-button"))==null||l.addEventListener("click",Qt),(i=document.getElementById("cancel-button"))==null||i.addEventListener("click",se)};
